<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GroupBy SQL — Practice Real-World SQL</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7BWSYYY018"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7BWSYYY018');
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Brand */
      --brand:#ffbd59;   /* orange */
      --accent:#004aad;  /* blue */
      /* Base */
      --bg:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --line:#e5e7eb;
      --soft:#f9fafb;
      --maxw:1200px;
      --radius:16px;
      --shadow:0 6px 18px rgba(0,0,0,.06);

      /* Brand lockup (15% smaller than 96/80/64) */
      --logo-h-desktop: 82px;
      --logo-h-tablet:  68px;
      --logo-h-phone:   54px;
      --logo-zoom: 1.5;  /* reduce zoom to avoid clipping */
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      line-height:1.6; font-size:16px;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ color:var(--accent); text-decoration:none }
    a:hover{ text-decoration:underline }
    .wrap{ max-width:var(--maxw); margin:0 auto; padding:0 24px }

    /* ===== Header (seamless over hero) ===== */
    header{
      position:sticky; top:0; z-index:20;
      background: transparent;         /* transparent at top to blend with hero */
      border-bottom: 0;                /* no border at top of page */
      backdrop-filter: none;           /* no blur halo */
      transition: background .18s ease, border-color .18s ease;
    }
    /* When scrolled past the hero, make header solid for readability */
    header.scrolled{
      background:#fff;
      border-bottom:1px solid var(--line);
      backdrop-filter:saturate(140%) blur(4px);
    }

    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:12px 0;
    }

    /* Brand lockup */
    .brand{ display:flex; align-items:center; gap:10px; min-width:0; }
    .gmark{
      height: var(--logo-h-desktop);
      width:  calc(var(--logo-h-desktop) * 0.95);
      background-image: url("./G.svg");
      background-repeat: no-repeat;
      background-position: center;
      background-size: calc(var(--logo-zoom) * 100%) auto;
      display:inline-block;
    }
    .brand .word{
      font-weight: 900;
      letter-spacing: -0.01em;
      color: var(--accent);
      line-height: 1;
      font-size: calc(var(--logo-h-desktop) * 0.36);
    }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
    @media (max-width: 960px){
      .gmark{ height: var(--logo-h-tablet); width: calc(var(--logo-h-tablet) * 0.95); }
      .brand .word{ font-size: calc(var(--logo-h-tablet) * 0.36); }
    }
    @media (max-width: 640px){
      .gmark{ height: var(--logo-h-phone); width: calc(var(--logo-h-phone) * 0.95); }
      .brand .word{ font-size: calc(var(--logo-h-phone) * 0.36); }
    }

    .menu{ display:flex; align-items:center; gap:20px; flex-wrap:wrap }
    .menu a{
      color:var(--accent); font-weight:600; font-size:15px; text-decoration:none; padding:6px 8px; border-radius:8px;
    }
    .menu a:hover{ background:rgba(0,74,173,.08) }

    /* ===== Hero with subtle brand gradient ===== */
    .hero{
      background:
        radial-gradient(1200px 500px at 85% -10%, rgba(255,189,89,.22), transparent 60%),
        radial-gradient(1200px 600px at -10% 20%, rgba(0,74,173,.12), transparent 60%),
        var(--soft);
      padding:72px 0 40px;
      border-bottom:0; /* removed divider for seamless sections */
    }
    .hero .inner{ max-width:1000px; margin:0 auto; text-align:center; }
    .eyebrow{
      display:inline-block; font-weight:700; letter-spacing:.08em; text-transform:uppercase;
      font-size:12px; color:#0b2545; background:rgba(255,189,89,.25);
      border:1px solid rgba(255,189,89,.5); border-radius:999px; padding:6px 10px; margin-bottom:12px;
    }
    .hero h1{
      margin:8px 0 12px; font-weight:900; letter-spacing:-0.03em;
      color:var(--accent); font-size:clamp(32px,5vw,50px);
    }
    .hero p{
      margin:0 auto 22px; color:var(--text); opacity:.95;
      font-size:clamp(18px,2.2vw,20px);
      max-width:60ch;
    }

    /* Preview box (PM question only; smaller text) */
    .previewbox{
      margin:26px auto 0; max-width:800px; text-align:left;
      background:#fff; border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
      overflow:hidden; font-size:90%;
    }
    .previewbox header{
      padding:12px 16px; border-bottom:1px solid var(--line);
    }
    .previewbox header h3{
      margin:0; font-size:16px; color:var(--accent); font-weight:800;
    }
    .previewbox .content{ padding:14px 16px }
    .pmq{ margin:0; font-size:0.95rem; color:#0b2545 }
    .previewbox .actions{
      display:flex; gap:10px; justify-content:center; padding:12px 16px 16px;
    }
    .btn{
      display:inline-flex; gap:10px; align-items:center; justify-content:center;
      border-radius:12px; padding:12px 18px; font-weight:800; text-decoration:none;
    }
    .btn.primary{ background:var(--brand); color:#1b1b1b; border:1px solid rgba(0,0,0,.06); }
    .btn.primary:hover{ filter:brightness(1.05); text-decoration:none }

    /* ===== Features ===== */
    .features{ padding:54px 0 }
    .features .grid{ display:grid; gap:22px; grid-template-columns: repeat(12, 1fr); }
    .card{
      grid-column: span 4; background:#fff; border:1px solid var(--line);
      border-radius:var(--radius); padding:22px; box-shadow:var(--shadow);
    }
    .card h3{ margin:0 0 6px; font-size:20px; color:var(--accent); font-weight:800 }
    .card p{ margin:0; color:var(--text); opacity:.95 }
    .icon{ width:30px; height:30px; display:inline-block; margin-bottom:12px; color:var(--accent); }

    /* ===== Mission (no borders) ===== */
    .mission{ background:#fff; padding:56px 0; border-top:0; border-bottom:0; }
    .mission .inner{ max-width:900px; margin:0 auto; text-align:center; }
    .mission h2{ margin:0 0 10px; color:var(--brand); font-size:clamp(24px,3.2vw,32px); font-weight:800; letter-spacing:-0.02em; }
    .mission p{ margin:0; color:var(--text); opacity:.95 }

    /* ===== Footer (no top border) ===== */
    footer{ background:#fff; border-top:0; padding:24px 0; text-align:center; color:var(--text); }
    footer .links{ display:flex; gap:16px; justify-content:center; flex-wrap:wrap; margin:10px 0 6px }
    footer a{ color:var(--accent); text-decoration:none; font-weight:700 }
    footer a:hover{ text-decoration:underline }

    /* Responsive features */
    @media (max-width: 960px){ .card{ grid-column: span 6; } }
    @media (max-width: 640px){
      .menu{ gap:12px }
      .card{ grid-column: span 12; }
      .hero{ padding:56px 0 28px }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header id="siteHeader">
    <div class="wrap nav">
      <a class="brand" href="./" id="brandLink" aria-label="GroupBySQL Home">
        <span class="gmark" aria-hidden="true"></span>
        <span class="word"><span class="sr-only">GroupBy </span><b>GroupBySQL</b></span>
      </a>
      <nav class="menu" aria-label="Main" id="topNav">
        <a href="./">Home</a>
        <a href="./playground.html">Challenges</a>
        <a href="./community.html">Community</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="wrap inner">
      <span class="eyebrow">We Master Logic, Not Just Syntax</span>
      <h1>Master SQL with Real Challenges</h1>
      <p>Tired of generic SQL trivia in interviews—like trimming strings or date conversions—that don’t prove real skills? GroupBySQL is built for that: we focus on the logic behind complex, manager-style challenges that move the business. Think → query → validate — and build reusable patterns for your next role.</p>

      <!-- PREVIEW BOX (PM question only) -->
      <div class="previewbox" id="previewBox">
        <header>
          <h3>Preview: Executive ask - how many of our customers are OnPrem vs Hybrid?</h3>
        </header>
        <div class="content">
          <p class="pmq">Answer using each customer’s latest deployment status.</p>
        </div>
        <div class="actions">
          <!-- One combined CTA -->
          <a class="btn primary" href="./playground.html" id="dojoBtn">Start Your First Challenge!</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="features">
    <div class="wrap">
      <div class="grid">
        <article class="card">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 2c.6 0 6 7 6 11a6 6 0 11-12 0c0-4 5.4-11 6-11z"/>
          </svg>
          <h3>Real Prompts</h3>
          <p>Manager questions grounded in real metrics—pricing, retention, churn, cost. Solve problems that matter, not just syntax drills.</p>
        </article>

        <article class="card">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M4 4h16v4H4V4zm0 6h10v4H4v-4zm0 6h16v4H4v-4z"/>
          </svg>
          <h3>Step-by-Step</h3>
          <p>Break it down: think → query → validate. Short stages with fast feedback keep your focus sharp.</p>
        </article>

        <article class="card">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M5 20V10h3v10H5zm5 0V6h3v14h-3zm5 0V3h3v17h-3z"/>
          </svg>
          <h3>Reusable Patterns</h3>
          <p>Craft mental models you can bring to work, from aggregation to insight, ready for any challenge.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Mission -->
  <section class="mission">
    <div class="wrap inner">
      <h2>Group by SQL. Grow Together.</h2>
      <p>
        At GroupBySQL, we believe real skill isn’t about memorizing syntax or measured by how many questions you clear — it’s how well you think through them.
        Syntax can always be looked up, but logic takes intention, structure, and practice.
        Our challenges are short, grounded in real business problems — pricing, retention, churn, and beyond — designed to strengthen how you reason, not just how you remember.
      </p>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="wrap">
      <div>© 2025 GroupBySQL</div>
      <div class="links">
        <a href="./terms.html">Terms</a>
        <a href="./privacy.html">Privacy</a>
        <a href="./contact.html">Contact</a>
        <a href="https://x.com/" target="_blank" rel="noopener">X</a>
        <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
        <a href="https://discord.com/" target="_blank" rel="noopener">Discord</a>
      </div>
    </div>
  </footer>

  <!-- Lightweight event logging -->
  <script>
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzFavS0r-rvCJY3KO9eCg682gCudh0HP0wVAnJ2z1PE-2dYTSEzfC4DiUZWm2fBu4Q7/exec';

    // --- Session id
    (function ensureSession(){
      try{
        if(!localStorage.getItem('session_id')){
          const uuid = (crypto && crypto.randomUUID) ? crypto.randomUUID()
            : 'sid-' + Math.random().toString(36).slice(2) + Date.now();
          localStorage.setItem('session_id', uuid);
        }
      }catch(e){}
    })();
    function sid(){ try{ return localStorage.getItem('session_id') || 'unknown'; }catch(e){ return 'unknown'; } }

    // Verbose logger (headers + keepalive + console logs)
    function logToSheet(event_type, extra = {}){
      if(!APPS_SCRIPT_URL || APPS_SCRIPT_URL.includes('YOUR_APPS_SCRIPT_URL')){
        console.warn('APPS_SCRIPT_URL not set');
        return;
      }
      const payload = {
        session_id: sid(),
        page: location.pathname,
        event_type,
        ...extra
      };
      console.log('[logToSheet] sending', payload);

      fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
        keepalive: true
      })
      .then(r => r.text().catch(()=>''))   // shows "ok" if readable
      .then(t => console.log('[logToSheet] response:', t))
      .catch(err => console.error('[logToSheet] error:', err));
    }

    // Page active seconds
    let start = Date.now();
    window.addEventListener('pagehide', ()=>{
      const secs = Math.round((Date.now()-start)/1000);
      logToSheet('page_active_seconds', { seconds: secs });
      if(window.gtag){ gtag('event','page_active_seconds', { value: secs }); }
    });

    // Nav events
    document.getElementById('topNav')?.addEventListener('click', (e)=>{
      const a = e.target.closest('a'); if(!a) return;
      const label = a.getAttribute('href')||'';
      logToSheet('nav_click', { label });
      if(window.gtag){ gtag('event','nav_click', { label }); }
    });
    document.getElementById('brandLink')?.addEventListener('click', ()=>{
      logToSheet('nav_click', { label:'brand_home' });
      if(window.gtag){ gtag('event','nav_click', { label:'brand_home' }); }
    });

    // CTA handler
    const dojo = document.getElementById('dojoBtn');
    dojo?.addEventListener('click', (e)=>{
      e.preventDefault(); // don't leave the page instantly
      logToSheet('open_sql_dojo');
      if(window.gtag){ gtag('event','open_sql_dojo'); }
      setTimeout(()=>{ location.href = dojo.getAttribute('href'); }, 120);
    });

    // Toggle header style when scrolling past the hero
    (function(){
      const headerEl = document.getElementById('siteHeader');
      const heroEl = document.querySelector('.hero');
      if(!headerEl || !heroEl) return;
      function onScroll(){
        const heroBottom = heroEl.getBoundingClientRect().bottom;
        if (heroBottom <= 0) headerEl.classList.add('scrolled');
        else headerEl.classList.remove('scrolled');
      }
      onScroll();
      window.addEventListener('scroll', onScroll, { passive: true });
    })();
  </script>
</body>
</html>
