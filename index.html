<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GroupBy SQL — Practice Real-World SQL</title>

  <!-- GA4 (replace G-XXXXXXXXXX with your Measurement ID) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX'); // <-- your GA4 ID
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Brand */
      --brand:#ffbd59;   /* orange pop */
      --accent:#004aad;  /* deep blue */
      /* Base */
      --bg:#ffffff;
      --text:#1f2937;     /* gray-800 */
      --muted:#6b7280;    /* gray-500 */
      --line:#e5e7eb;     /* gray-200 */
      --soft:#f9fafb;     /* light bg */
      --maxw:1200px;
      --radius:14px;
      --shadow:0 6px 18px rgba(0,0,0,.06);
      --code:#0b1020;
      --code-bg:#f5f8ff;

      /* Proportional brand lockup sizes */
      --logo-h-desktop: 72px;
      --logo-h-tablet:  56px;
      --logo-h-phone:   48px;
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      line-height:1.6; font-size:16px;
      text-rendering:optimizeLegibility; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    a{ color:var(--accent); text-decoration:none }
    a:hover{ text-decoration:underline }
    .wrap{ max-width:var(--maxw); margin:0 auto; padding:0 24px }

    /* Header */
    header{
      position:sticky; top:0; z-index:20; background:#fff;
      border-bottom:1px solid var(--line);
      backdrop-filter:saturate(140%) blur(4px);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:12px 0;
    }

    /* Brand lockup */
    .brand{
      display:flex; align-items:center; gap:10px; min-width:0;
    }
    .gmark{
      height: var(--logo-h-desktop);
      width:  calc(var(--logo-h-desktop) * 0.9);
      background: url("./G.svg") center/contain no-repeat;
      display:inline-block;
    }
    .brand .word{
      font-weight: 900;
      letter-spacing: -0.01em;
      color: var(--accent);
      line-height: 1;
      font-size: calc(var(--logo-h-desktop) * 0.34);
    }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
    @media (max-width: 960px){
      .gmark{ height: var(--logo-h-tablet); width: calc(var(--logo-h-tablet) * 0.82); }
      .brand .word{ font-size: calc(var(--logo-h-tablet) * 0.34); }
    }
    @media (max-width: 640px){
      .gmark{ height: var(--logo-h-phone); width: calc(var(--logo-h-phone) * 0.82); }
      .brand .word{ font-size: calc(var(--logo-h-phone) * 0.34); }
    }

    .menu{ display:flex; align-items:center; gap:20px; flex-wrap:wrap }
    .menu a{
      color:var(--accent); font-weight:600; font-size:15px; text-decoration:none; padding:6px 8px; border-radius:8px;
    }
    .menu a:hover{ background:rgba(0,74,173,.08) }

    /* Hero with subtle brand gradient */
    .hero{
      background:
        radial-gradient(1200px 500px at 85% -10%, rgba(255,189,89,.22), transparent 60%),
        radial-gradient(1200px 600px at -10% 20%, rgba(0,74,173,.12), transparent 60%),
        var(--soft);
      padding:72px 0 40px;
      border-bottom:1px solid var(--line);
    }
    .hero .inner{ max-width:1000px; margin:0 auto; text-align:center; }
    .eyebrow{
      display:inline-block; font-weight:700; letter-spacing:.08em; text-transform:uppercase;
      font-size:12px; color:#0b2545; background:rgba(255,189,89,.25);
      border:1px solid rgba(255,189,89,.5); border-radius:999px; padding:6px 10px; margin-bottom:12px;
    }
    .hero h1{
      margin:8px 0 12px; font-weight:900; letter-spacing:-0.03em;
      color:var(--accent); font-size:clamp(32px,5vw,50px);
    }
    .hero p{
      margin:0 auto 22px; color:var(--text); opacity:.95;
      font-size:clamp(18px,2.2vw,20px);
      max-width:60ch;
    }

    /* Preview box (replaces previous CTA/buttons) */
    .previewbox{
      margin:26px auto 0; max-width:860px; text-align:left;
      background:#fff; border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
      overflow:hidden;
    }
    .previewbox header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 18px; border-bottom:1px solid var(--line);
    }
    .previewbox header h3{ margin:0; font-size:18px; color:var(--accent); font-weight:800 }
    .previewbox .content{ padding:16px 18px }
    .previewbox .actions{
      display:flex; gap:10px; justify-content:flex-end; padding:0 18px 16px;
    }
    .openlink{
      display:inline-flex; gap:10px; align-items:center; justify-content:center;
      border-radius:12px; padding:12px 18px; font-weight:800;
      border:1px solid var(--accent); color:#fff; background:var(--accent);
      text-decoration:none;
    }
    .openlink:hover{ filter:brightness(0.95); text-decoration:none }

    /* SQL teaser styles reused inside preview */
    .codewrap{
      margin:12px 0 0; max-width:100%; text-align:left;
      background:var(--code-bg); border:1px solid #dfe7ff; border-radius:14px; box-shadow:var(--shadow);
      padding:16px 18px; overflow:auto;
    }
    pre, code{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    pre{ margin:0; font-size:14px; color:var(--code) }
    .badge{
      display:inline-block; font-size:11px; font-weight:700; color:#0b2545;
      background:#fff; border:1px solid #dfe7ff; border-radius:8px; padding:3px 8px; margin-bottom:8px;
    }

    /* Features */
    .features{ padding:54px 0 }
    .features .grid{
      display:grid; gap:22px;
      grid-template-columns: repeat(12, 1fr);
    }
    .card{
      grid-column: span 4;
      background:#fff; border:1px solid var(--line);
      border-radius:var(--radius); padding:22px;
      box-shadow:var(--shadow);
    }
    .card h3{ margin:0 0 6px; font-size:20px; color:var(--accent); font-weight:800 }
    .card p{ margin:0; color:var(--text); opacity:.95 }
    .icon{
      width:30px; height:30px; display:inline-block; margin-bottom:12px;
      color:var(--accent);
    }
    /* Reusable Patterns icon in BLUE now (use default .icon) */

    /* Mission */
    .mission{
      background:#fff; padding:56px 0; border-top:1px solid var(--line); border-bottom:1px solid var(--line);
    }
    .mission .inner{ max-width:900px; margin:0 auto; text-align:center; }
    .mission h2{ margin:0 0 10px; color:var(--brand); font-size:clamp(24px,3.2vw,32px); font-weight:800; letter-spacing:-0.02em; } /* ORANGE */
    .mission p{ margin:0; color:var(--text); opacity:.95 }

    /* Footer */
    footer{
      background:#fff; border-top:1px solid var(--line); padding:24px 0; text-align:center; color:var(--text);
    }
    footer .links{ display:flex; gap:16px; justify-content:center; flex-wrap:wrap; margin:10px 0 6px }
    footer a{ color:var(--accent); text-decoration:none; font-weight:700 }
    footer a:hover{ text-decoration:underline }

    /* Responsive cards */
    @media (max-width: 960px){ .card{ grid-column: span 6; } }
    @media (max-width: 640px){
      .menu{ gap:12px }
      .card{ grid-column: span 12; }
      .hero{ padding:56px 0 28px }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="wrap nav">
      <a class="brand" href="./" id="brandLink" aria-label="GroupBySQL Home">
        <span class="gmark" aria-hidden="true"></span>
        <span class="word"><span class="sr-only">GroupBy </span><b>SQL</b></span>
      </a>
      <nav class="menu" aria-label="Main" id="topNav">
        <a href="./">Home</a>
        <a href="./playground.html">Challenges</a>
        <a href="./community.html">Community</a>
        <a href="./about.html">About</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="wrap inner">
      <span class="eyebrow">Practice that feels like work</span>
      <h1>Master SQL with Real Challenges</h1>
      <p>Manager-style prompts in pricing, retention, churn, and cost. Think → query → validate — and learn patterns you can reuse at work.</p>

      <!-- PREVIEW BOX replaces old CTA/buttons -->
      <div class="previewbox" id="previewBox">
        <header>
          <h3>Preview: OS Share by Customer (Latest Active Key)</h3>
        </header>
        <div class="content">
          <p><strong>Scenario:</strong> Your PM asks, “What OS do our customers most recently activate on?” Return customers by OS using each customer’s latest active key.</p>

          <div class="codewrap">
            <span class="badge">Starter Tables</span>
            <pre><code>keys(customer_id, os, activated_at, status)
-- status ∈ {'active','revoked'}</code></pre>
          </div>

          <div class="codewrap">
            <span class="badge">Expected Output (shape)</span>
            <pre><code>os      customers
------  ---------
iOS     142
Android  96
Other    11</code></pre>
          </div>
        </div>
        <div class="actions">
          <a class="openlink" href="./playground.html" id="openPlayground">Open in Playground →</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="features">
    <div class="wrap">
      <div class="grid">
        <article class="card">
          <!-- droplet icon (query) -->
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M12 2c.6 0 6 7 6 11a6 6 0 11-12 0c0-4 5.4-11 6-11z"/>
          </svg>
          <h3>Real Prompts</h3>
          <p>Manager questions grounded in real metrics—pricing, retention, churn, cost.</p>
        </article>

        <article class="card">
          <!-- blue table icon (steps) -->
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M4 4h16v4H4V4zm0 6h10v4H4v-4zm0 6h16v4H4v-4z"/>
          </svg>
          <h3>Step-by-Step</h3>
          <p>Think → query → validate. Short stages keep focus tight and feedback fast.</p>
        </article>

        <article class="card">
          <!-- Reusable Patterns icon in BLUE now (no .orange class) -->
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M5 20V10h3v10H5zm5 0V6h3v14h-3zm5 0V3h3v17h-3z"/>
          </svg>
          <h3>Reusable Patterns</h3>
          <p>Build mental models you can bring straight into your next role.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Mission -->
  <section class="mission">
    <div class="wrap inner">
      <h2>Group by SQL. Grow Together.</h2> <!-- now orange via CSS above -->
      <p>
        Train on real business prompts, validate each step, and learn patterns you can reuse at work.
        Challenges are short, realistic, and designed to build confidence fast.
      </p>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="wrap">
      <div>© 2025 GroupBySQL</div>
      <div class="links">
        <a href="./terms.html">Terms</a>
        <a href="./privacy.html">Privacy</a>
        <a href="./contact.html">Contact</a>
        <!-- socials -->
        <a href="https://x.com/" target="_blank" rel="noopener">X</a>
        <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>
        <a href="https://discord.com/" target="_blank" rel="noopener">Discord</a>
      </div>
    </div>
  </footer>

  <!-- Event logging -->
  <script>
    const APPS_SCRIPT_URL = 'YOUR_APPS_SCRIPT_URL'; // <-- replace with your deployed Web App URL

    (function ensureSession(){
      try{
        if(!localStorage.getItem('session_id')){
          const uuid = (crypto && crypto.randomUUID) ? crypto.randomUUID()
            : 'sid-' + Math.random().toString(36).slice(2) + Date.now();
          localStorage.setItem('session_id', uuid);
        }
      }catch(e){}
    })();
    function sid(){ try{ return localStorage.getItem('session_id') || 'unknown'; }catch(e){ return 'unknown'; } }

    function logToSheet(event_type, extra={}){
      if(!APPS_SCRIPT_URL || APPS_SCRIPT_URL.includes('YOUR_APPS_SCRIPT_URL')) return;
      const payload = { session_id: sid(), page: location.pathname, event_type, ...extra };
      try{
        const blob = new Blob([JSON.stringify(payload)], {type:'application/json'});
        if(navigator.sendBeacon){ navigator.sendBeacon(APPS_SCRIPT_URL, blob); return; }
      }catch(e){}
      fetch(APPS_SCRIPT_URL, { method:'POST', body: JSON.stringify(payload) }).catch(()=>{});
    }

    let start = Date.now();
    window.addEventListener('pagehide', ()=>{
      const secs = Math.round((Date.now()-start)/1000);
      logToSheet('page_active_seconds', { seconds: secs });
      if(window.gtag){ gtag('event','page_active_seconds', { value: secs }); }
    });

    // Nav + open playground events
    document.getElementById('topNav')?.addEventListener('click', (e)=>{
      const a = e.target.closest('a'); if(!a) return;
      logToSheet('nav_click', { label: a.getAttribute('href')||'' });
      if(window.gtag){ gtag('event','nav_click', { label: a.getAttribute('href')||'' }); }
    });
    document.getElementById('brandLink')?.addEventListener('click', ()=>{
      logToSheet('nav_click', { label:'brand_home' });
      if(window.gtag){ gtag('event','nav_click', { label:'brand_home' }); }
    });
    document.getElementById('openPlayground')?.addEventListener('click', ()=>{
      logToSheet('start_challenge_from_preview');
      if(window.gtag){ gtag('event','start_challenge_from_preview'); }
    });
  </script>
</body>
</html>
